type: vertical-stack
cards:
  # ============================================================================
  #  1. GLOBAL SYSTEM HEADER
  # ============================================================================
  - type: custom:mushroom-template-card
    primary: >
      {% if is_state('switch.all_doors_lockdown', 'on') %}
        â›” GLOBAL LOCKDOWN
      {% elif is_state('input_boolean.pause_door_schedule', 'on') %}
        â¸ï¸ SYSTEM PAUSED
      {% else %}
        SYSTEM ONLINE
      {% endif %}
    secondary: >
      {% if is_state('switch.all_doors_lockdown', 'on') %}
        Master Switch Active - All Doors Locked
      {% elif is_state('input_boolean.pause_door_schedule', 'on') %}
        Maintenance Mode - Schedule Ignored
      {% else %}
        Monitoring Calendar & Security Rules
      {% endif %}
    icon: >
      {% if is_state('switch.all_doors_lockdown', 'on') %}
        mdi:alert-decagram
      {% elif is_state('input_boolean.pause_door_schedule', 'on') %}
        mdi:pause-octagon
      {% else %}
        mdi:pulse
      {% endif %}
    icon_color: >
      {% if is_state('switch.all_doors_lockdown', 'on') %}
        red
      {% elif is_state('input_boolean.pause_door_schedule', 'on') %}
        amber
      {% else %}
        green
      {% endif %}
    tap_action:
      action: navigate
      navigation_path: /config/integrations

  # ============================================================================
  #  2. DOOR LIST
  # ============================================================================
  - type: custom:mushroom-template-card
    entity: lock.door_0664
    primary: Front Door
    secondary: >
      {% if states('select.door_0664_door_lock_rule') in ['keep_lock', 'keep_locked'] %}
        ðŸ”’ Manual Override (Locked)
      {% elif is_state('lock.door_0664', 'unlocked') %}
        ðŸ”“ Unlocked by Schedule
      {% else %}
        Waiting for Next Event...
      {% endif %}
    icon: >
      {% if states('select.door_0664_door_lock_rule') in ['keep_lock', 'keep_locked'] %}
        mdi:lock-alert
      {% elif is_state('lock.door_0664', 'unlocked') %}
        mdi:door-open
      {% else %}
        mdi:door-closed-lock
      {% endif %}
    icon_color: >
      {% if states('select.door_0664_door_lock_rule') in ['keep_lock', 'keep_locked'] %}
        deep-orange
      {% elif is_state('lock.door_0664', 'unlocked') %}
        cyan
      {% else %}
        green
      {% endif %}
    layout: horizontal
    tap_action:
      action: more-info

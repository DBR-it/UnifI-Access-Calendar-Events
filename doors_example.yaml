# ==============================================================================
#  UNIFI ACCESS DOOR MANAGER - CONFIGURATION
# ==============================================================================
#  INSTRUCTIONS:
#  1. Place this file in /config/pyscript/
#  2. Rename it to 'doors.yaml'.
#  3. Update the entities below to match your Home Assistant setup.
#  4. Restart Home Assistant to apply changes.
# ==============================================================================

Settings:
  # [REQUIRED] MASTER PAUSE TOGGLE
  # Turn ON to stop the automation (Maintenance/Holiday).
  pause_entity: input_boolean.pause_door_schedule

  # [OPTIONAL] PHYSICAL LOCKDOWN SWITCH
  # Turn ON to immediately lock all doors and ignore schedule.
  lockdown_switch: switch.all_doors_lockdown

  # [OPTIONAL] GLOBAL MASTER KEY
  # If an event title contains this text, ALL doors unlock.
  # Option A: Use a Helper (Flexible)
  global_keyword_helper: input_text.global_door_keyword
  # Option B: Hardcoded Text (Simple) - Uncomment to use
  # global_keyword_helper: "ALL"

  # [REQUIRED] SYSTEM MEMORY
  # Stores state to prevent notification spam.
  memory_entity: input_text.door_manager_memory

  # NIGHT MODE (THE BOUNCER)
  # When does the building CLOSE (Lockdown Start) and OPEN (Lockdown End)?
  
  # OPTION A: Use Dashboard Helpers (Adjustable from Phone)
  # night_mode_start: input_datetime.night_mode_start
  # night_mode_end: input_datetime.night_mode_end

  # OPTION B: Hardcoded Text (Set and Forget)
  night_mode_start: "11:00 PM"
  night_mode_end: "6:00 AM"

  # [OPTIONAL] DEBUGGING
  # Set to true to see logs in Settings > System > Logs.
  debug_logging: true

# ==============================================================================
#  DEFAULTS (Global Rules)
# ==============================================================================
#  These settings apply to ALL doors unless specifically overridden below.
# ==============================================================================
Defaults:
  # Default Buffers (Minutes)
  # Pre: Unlock BEFORE event. Post: Lock AFTER event.
  pre_buffer: 15
  post_buffer: 15
  
  # Default Notification Service
  # The phone that gets the alerts (e.g., notify.mobile_app_iphone).
  notification_service: notify.mobile_app_your_phone

# ==============================================================================
#  DOOR CONFIGURATION
# ==============================================================================

# EXAMPLE 1: THE "HYBRID" DOOR (Most Common)
# Uses Dashboard Helpers for settings you change often, but keeps the rest simple.
Front Door:
  entity: lock.front_door
  reset_entity: select.front_door_lock_rule
  calendar: calendar.office_schedule
  
  # KEYWORD CONFIGURATION (Choose One)
  # Option A: Dashboard Helper
  keyword_helper: input_text.door_keyword
  # Option B: Hardcoded Text
  # keyword: "D1"
  
  # BUFFER CONFIGURATION (Choose One)
  # Option A: Dashboard Sliders
  pre_buffer: input_number.front_door_pre_buffer
  post_buffer: input_number.front_door_post_buffer
  # Option B: Hardcoded Minutes
  # pre_buffer: 15
  # post_buffer: 15
  
  # NOTIFICATIONS: 'summary' (once per day) or 'all' (every unlock)
  notify_type: summary


# EXAMPLE 2: THE "SIMPLE" DOOR (Hardcoded)
# No helpers needed. Just set the values here and forget it.
# ------------------------------------------------------------------------------
# Warehouse:
#   entity: lock.warehouse_door
#   reset_entity: select.warehouse_rule
#   calendar: calendar.warehouse_schedule
#   keyword: "WH"         # Hardcoded keyword
#   # Buffers use Defaults (15/15) unless you add them here:
#   # pre_buffer: 30
#   # post_buffer: 30


# EXAMPLE 3: THE "STRICT" DOOR (Zero Buffer)
# Overrides defaults for exact timing.
# ------------------------------------------------------------------------------
# Server Room:
#   entity: lock.server_room
#   reset_entity: select.server_rule
#   calendar: calendar.it_schedule
#   keyword: "SERVER"
#   pre_buffer: 0
#   post_buffer: 0
#   notification_service: notify.it_admin_phone
